# 📊 통계 분석 방법론 가이드라인

**Enhanced RAG 시스템을 위한 통계 분석 방법 선택 및 적용 지침**

---

## 🎯 개요

이 가이드라인은 Enhanced RAG 시스템의 AI 추천 엔진이 비즈니스 컨텍스트와 데이터 특성을 고려하여 최적의 통계 분석 방법을 추천할 수 있도록 체계적인 의사결정 프레임워크를 제공합니다.

---

## 🧭 분석 방법 선택 플로우차트

### 1단계: 분석 목적 분류

#### A. 그룹 간 비교 분석
- **두 그룹 비교**: 성별, A/B 테스트 등
- **다중 그룹 비교**: 지역별, 연령대별, 제품별 등
- **시점별 비교**: 사전-사후, 시계열 트렌드 등

#### B. 관계 및 연관성 분석
- **상관관계**: 두 연속변수 간 선형 관계
- **회귀분석**: 종속변수에 영향을 미치는 요인 분석
- **연관성 분석**: 범주형 변수 간 관계

#### C. 예측 및 분류 모델링
- **값 예측**: 매출, 성과 등 연속형 결과 예측
- **확률 예측**: 이탈, 구매 등 이벤트 발생 확률
- **분류**: 고객 세그먼트, 위험군 분류

---

## 📋 그룹 간 비교 분석 가이드라인

### 두 그룹 비교

#### 독립표본 t-검정 (Independent t-test)
**적용 조건:**
- 연속형 종속변수
- 두 개의 독립된 그룹
- 정규성 만족 (각 그룹 n≥30 또는 Shapiro-Wilk p>0.05)
- 등분산성 만족 (Levene's test p>0.05)

**비즈니스 적용 예시:**
- 남녀 간 평균 구매금액 차이
- 신제품 vs 기존제품 만족도 비교
- 온라인 vs 오프라인 채널 수익률 비교

**RAG 검색 키워드:** "두 그룹 평균 비교", "independent t-test", "그룹별 차이"

**결과 해석 가이드:**
- p-value < 0.05: 통계적으로 유의한 차이
- Cohen's d 계산: 효과 크기 측정 (0.2=작음, 0.5=중간, 0.8=큼)
- 95% 신뢰구간: 평균 차이의 범위

#### Mann-Whitney U 검정 (비모수)
**적용 조건:**
- 정규성 불만족 시 t-검정의 대안
- 순서형 데이터
- 표본 크기가 작을 때

**비즈니스 적용 예시:**
- 만족도 점수 (1-5점) 그룹별 비교
- 순위 데이터 비교
- 이상치가 많은 매출 데이터 비교

### 다중 그룹 비교

#### 일원분산분석 (One-way ANOVA)
**적용 조건:**
- 연속형 종속변수
- 3개 이상의 독립된 그룹
- 정규성 및 등분산성 만족
- 독립성 가정 충족

**비즈니스 적용 예시:**
- 지역별 매출 비교 (서울/부산/대구)
- 연령대별 제품 선호도 분석
- 부서별 직원 만족도 비교

**사후검정 (Post-hoc tests):**
- **Tukey HSD**: 모든 그룹 쌍별 비교, 보수적
- **Bonferroni**: 다중비교 오류 엄격 통제
- **Duncan**: 탐색적 분석 시, 자유로운 비교

**RAG 검색 키워드:** "다중 그룹 비교", "ANOVA", "지역별 분석", "그룹간 차이"

#### Kruskal-Wallis 검정 (비모수)
**적용 조건:**
- ANOVA의 가정 불만족 시
- 순서형 데이터
- 그룹별 분포 형태가 유사

**결과 해석:**
- 전체 그룹 간 차이 존재성 검정
- 사후검정: Dunn's test with Bonferroni correction

---

## 🔗 관계 및 연관성 분석 가이드라인

### 상관관계 분석

#### 피어슨 상관계수 (Pearson Correlation)
**적용 조건:**
- 두 변수 모두 연속형
- 선형 관계
- 정규분포 (대략적으로)

**해석 기준:**
- |r| < 0.3: 약한 상관관계
- 0.3 ≤ |r| < 0.7: 중간 상관관계  
- |r| ≥ 0.7: 강한 상관관계

**비즈니스 적용 예시:**
- 광고비와 매출 간 상관관계
- 직원 만족도와 고객 만족도 관계
- 교육시간과 성과 점수 관계

**RAG 검색 키워드:** "상관관계", "correlation", "관련성", "연관성"

#### 스피어만 상관계수 (Spearman Correlation)
**적용 조건:**
- 순서형 데이터
- 비선형 단조 관계
- 정규성 가정 불필요

### 회귀분석

#### 단순선형회귀 (Simple Linear Regression)
**적용 조건:**
- 하나의 독립변수, 하나의 종속변수
- 선형 관계
- 잔차의 정규성, 등분산성, 독립성

**비즈니스 적용 예시:**
- 광고비 → 매출 예측
- 경력 → 연봉 관계
- 교육시간 → 성과 향상

#### 다중선형회귀 (Multiple Linear Regression)
**적용 조건:**
- 여러 독립변수, 하나의 연속형 종속변수
- 독립변수 간 다중공선성 없음 (VIF < 10)
- 회귀 가정 충족

**변수 선택 방법:**
- **Forward**: 중요한 변수부터 순차 추가
- **Backward**: 모든 변수에서 불필요한 것 제거
- **Stepwise**: Forward + Backward 결합

**RAG 검색 키워드:** "회귀분석", "regression", "예측 모델", "영향 요인"

#### 로지스틱 회귀 (Logistic Regression)
**적용 조건:**
- 이진형 종속변수 (성공/실패, 구매/비구매)
- 선형성 가정 불필요
- 독립변수 간 다중공선성 주의

**비즈니스 적용 예시:**
- 고객 이탈 예측
- 마케팅 응답 확률
- 제품 구매 가능성

---

## 📊 범주형 데이터 분석 가이드라인

### 카이제곱 검정 (Chi-square Test)

#### 적합도 검정 (Goodness of Fit)
**적용 조건:**
- 하나의 범주형 변수
- 이론적 분포와 관측 분포 비교
- 기대빈도 ≥ 5

**비즈니스 적용 예시:**
- 제품 선호도가 균등한지 검정
- 요일별 판매량 균등성 검정

#### 독립성 검정 (Test of Independence)
**적용 조건:**
- 두 개의 범주형 변수
- 각 셀의 기대빈도 ≥ 5
- 독립성 가정

**비즈니스 적용 예시:**
- 성별과 제품 선호도 관련성
- 지역과 구매 채널 연관성
- 연령대와 브랜드 충성도 관계

**RAG 검색 키워드:** "카이제곱", "chi-square", "범주형 관계", "독립성"

**대안 방법:**
- **피셔 정확검정**: 표본이 작을 때 (기대빈도 < 5)
- **Cramér's V**: 연관성 강도 측정 (0~1)

---

## ⚙️ 분석 전 데이터 전처리 가이드라인

### 데이터 품질 검사

#### 결측값 처리
**패턴 분석:**
- **MCAR (완전 무작위)**: 완전 삭제 또는 단순 대치
- **MAR (무작위)**: 다중 대치 또는 모델 기반 대치
- **MNAR (비무작위)**: 도메인 전문가 상담 필요

**처리 전략:**
- 결측률 < 5%: 완전 삭제
- 결측률 5-20%: 평균/중앙값 대치 또는 회귀 대치
- 결측률 > 20%: 다중 대치 또는 변수 제외 고려

#### 이상치 탐지 및 처리
**탐지 방법:**
- **IQR 방법**: Q1 - 1.5×IQR 미만, Q3 + 1.5×IQR 초과
- **Z-score**: |z| > 3 (정규분포 가정)
- **Modified Z-score**: MAD 기반, 로버스트

**처리 방법:**
- **삭제**: 명백한 입력 오류 시
- **변환**: 로그, 제곱근 변환으로 분포 정규화
- **Winsorizing**: 극값을 특정 백분위수 값으로 대체
- **유지**: 비즈니스적으로 의미 있는 극값

#### 정규성 검정
**검정 방법:**
- **Shapiro-Wilk**: n < 50, 가장 강력
- **Kolmogorov-Smirnov**: n ≥ 50, 일반적
- **Anderson-Darling**: 꼬리 부분에 민감
- **Jarque-Bera**: 왜도와 첨도 기반

**정규성 불만족 시:**
- **변환**: 로그, 제곱근, Box-Cox 변환
- **비모수 방법**: Mann-Whitney, Kruskal-Wallis 등
- **부트스트래핑**: 표집 분포 근사

---

## 📈 효과 크기 및 실무적 해석

### 효과 크기 측정

#### 연속형 변수
- **Cohen's d**: (M1 - M2) / Spooled
  - 작은 효과: d = 0.2
  - 중간 효과: d = 0.5
  - 큰 효과: d = 0.8

#### 분산분석
- **Eta-squared (η²)**: 설명되는 분산 비율
  - 작은 효과: η² = 0.01
  - 중간 효과: η² = 0.06
  - 큰 효과: η² = 0.14

#### 상관관계
- **결정계수 (R²)**: 설명되는 분산 비율
  - 작은 효과: R² = 0.02
  - 중간 효과: R² = 0.13
  - 큰 효과: R² = 0.26

### 비즈니스 의사결정 통합

#### 실무적 유의성 판단 기준
1. **경제적 가치**: 효과의 금전적 가치 계산
2. **실행 비용**: 변화 구현에 필요한 비용
3. **위험 수준**: 변화로 인한 잠재적 위험
4. **지속가능성**: 장기적 유지 가능성

#### 권장사항 우선순위
1. **High Impact, Low Cost**: 즉시 실행
2. **High Impact, High Cost**: 단계적 실행 계획
3. **Low Impact, Low Cost**: 여유 자원 시 실행
4. **Low Impact, High Cost**: 실행 보류

---

## 🔧 분석 도구 및 패키지 권장사항

### Python 패키지
```python
# 기본 통계 분석
import scipy.stats as stats
import statsmodels.api as sm

# 데이터 처리
import pandas as pd
import numpy as np

# 시각화
import matplotlib.pyplot as plt
import seaborn as sns

# 고급 분석
from sklearn import metrics, model_selection
```

### 분석별 권장 패키지
- **기초 통계**: scipy.stats, statsmodels
- **회귀분석**: sklearn, statsmodels
- **비모수 검정**: scipy.stats
- **다중 대치**: fancyimpute, sklearn.impute
- **효과 크기**: pingouin, scipy.stats

---

## 🎯 도메인별 특수 고려사항

### 영업/매출 분석
- **계절성**: 월별, 분기별 패턴 고려
- **트렌드**: 전년 동기 대비 성장률
- **외부 요인**: 경제 지표, 경쟁사 활동

### 마케팅 분석
- **A/B 테스트**: 표본 크기, 실험 기간, 다중 검정
- **고객 세그먼트**: 세그먼트별 분석 결과 종합
- **퍼널 분석**: 단계별 전환율 최적화

### 교육 분석
- **사전-사후 설계**: 대응표본 t-검정
- **학급 효과**: 계층적 모델링 고려
- **개인차**: 혼합 효과 모델

### 재무 분석
- **위험 조정**: 샤프 비율, 베타 계수
- **시간 가치**: 할인율 적용
- **시나리오 분석**: 몬테카르로 시뮬레이션

---

## 📝 분석 보고서 체크리스트

### 방법론 섹션
- [ ] 분석 목적 및 가설 명시
- [ ] 데이터 출처 및 특성 설명
- [ ] 분석 방법 선택 근거
- [ ] 가정 검토 결과
- [ ] 전처리 과정 기술

### 결과 섹션
- [ ] 기초 통계량 제시
- [ ] 주요 분석 결과 (p-value, 신뢰구간)
- [ ] 효과 크기 계산
- [ ] 가정 위반 시 대안 분석
- [ ] 민감도 분석 (필요시)

### 해석 섹션
- [ ] 통계적 결과의 비즈니스 의미
- [ ] 실무적 유의성 평가
- [ ] 한계점 및 주의사항
- [ ] 추가 분석 제안
- [ ] 구체적 실행 방안

---

## 🚨 흔한 오류 및 주의사항

### 통계적 오류
1. **다중 비교 오류**: p-hacking, Bonferroni 보정 누락
2. **가정 위반**: 정규성, 등분산성 확인 없이 모수 검정 사용
3. **표본 크기 부족**: 검정력 분석 없이 진행
4. **상관관계 ≠ 인과관계**: 혼동 변수 고려 누락

### 해석 오류
1. **p-value 오해**: 0.06 ≈ 0.05로 임의 해석
2. **효과 크기 무시**: 통계적 유의성만 강조
3. **일반화 오류**: 특정 조건의 결과를 전체로 확대
4. **실무적 의미 간과**: 통계적 차이의 비즈니스 가치 평가 누락

### 예방 방법
- 사전 분석 계획 수립
- 동료 검토 및 교차 검증
- 도메인 전문가 협의
- 결과의 로버스트성 확인 