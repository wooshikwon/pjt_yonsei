# 통계적 지식: 분산분석 (ANOVA - Analysis of Variance)

## 1. 정의 (Definition)

분산분석(ANOVA)은 셋 이상의 집단 간의 평균에 통계적으로 유의미한 차이가 있는지를 검정하는 데 사용되는 통계 분석 방법입니다. 이름은 '분산분석'이지만, 실제로는 **집단 간 평균**을 비교하기 위해 **분산**의 개념을 활용합니다.

핵심 아이디어는 '집단 간 분산(between-group variance)'과 '집단 내 분산(within-group variance)'을 비교하는 것입니다. 집단 간의 차이가 집단 내부의 무작위적인 차이보다 충분히 크다면, 집단 간 평균에 유의미한 차이가 있다고 결론 내립니다.

## 2. 사용 시점 (When to Use)

-   **독립 변수**: 3개 이상의 수준(그룹)을 가진 범주형 변수 1개 (예: `SubscriptionTier` - 'Basic', 'Standard', 'Premium')
-   **종속 변수**: 연속형 수치 변수 1개 (예: `MonthlySpend`)
-   **연구 질문**: "구독 등급에 따라 월 평균 지출액에 차이가 있는가?"

## 3. 핵심 가정 (Key Assumptions)

ANOVA는 T-검정과 유사한 가정을 가집니다.

1.  **독립성 (Independence)**: 모든 관측치는 서로 독립적입니다.
2.  **정규성 (Normality)**: 각 집단의 종속 변수 데이터는 정규분포를 따라야 합니다. (Shapiro-Wilk 검정 등으로 확인)
3.  **등분산성 (Homogeneity of Variances)**: 모든 집단의 분산은 서로 같아야 합니다. (Levene 검정 등으로 확인)

## 4. 결과 해석 (Interpretation of Results)

-   **F-statistic**: 집단 간 분산을 집단 내 분산으로 나눈 값입니다. F-값이 클수록 집단 간 평균의 차이가 집단 내의 차이보다 상대적으로 크다는 것을 의미합니다.
-   **p-value**: 귀무가설(모든 집단의 평균이 같다)이 사실일 때 현재와 같은 F-statistic 값을 관찰할 확률입니다. p-value가 유의수준(보통 0.05)보다 작으면, "적어도 한 집단의 평균은 다른 집단들과 다르다"라고 결론 내립니다.

**중요**: ANOVA의 F-검정은 **전체적으로 차이가 있는지**만 알려줄 뿐, **어떤 집단끼리** 차이가 있는지는 알려주지 않습니다.

## 5. 사후 분석 (Post-Hoc Analysis)

ANOVA 결과가 통계적으로 유의하게 나왔을 경우(p < 0.05), 어떤 집단들 간에 구체적으로 차이가 있는지를 알아내기 위해 **사후 분석**을 반드시 실시해야 합니다.

-   **Tukey's HSD (Honest Significant Difference) Test**: 가장 일반적으로 사용되는 사후 분석 방법입니다. 모든 가능한 집단 쌍(예: Basic vs Standard, Basic vs Premium, Standard vs Premium)에 대해 T-검정을 수행하면서, 다중 비교로 인해 발생할 수 있는 1종 오류(False Positive)의 증가를 보정해줍니다.

## 6. LLM 에이전트 활용 가이드

-   **계획 수립**:
    -   사용자 요청이 셋 이상 그룹 간의 평균 비교일 때 ANOVA를 계획합니다.
    -   본 분석(ANOVA) 이전에 반드시 **정규성 검정**과 **등분산성 검정**을 계획에 포함해야 합니다.
    -   ANOVA 단계 **직후**에, ANOVA가 유의할 경우를 대비하여 **Tukey's HSD 사후 분석** 단계를 항상 계획에 포함시켜야 합니다.
    -   마지막으로 **Eta-squared (η²)**와 같은 효과 크기 계산 단계를 추가하여, 그룹 간 차이가 전체 분산의 몇 퍼센트를 설명하는지 보고해야 합니다.
-   **결과 해석**:
    -   가정 검정 결과를 먼저 보고합니다.
    -   ANOVA의 F-값과 p-값을 보고하며, "그룹 간에 전반적으로 유의미한 평균 차이가 있는지"를 결론 내립니다.
    -   만약 ANOVA가 유의하다면, Tukey HSD 사후 분석 결과를 제시하며 "구체적으로 어느 그룹과 어느 그룹 사이에 유의미한 차이가 있었는지"를 상세히 설명합니다. (예: "Premium 그룹은 Basic 그룹과 Standard 그룹보다 월 평균 지출액이 유의하게 높았으나, Basic 그룹과 Standard 그룹 간에는 유의미한 차이가 없었습니다.") 